---
import Layout from '../../components/Layout.astro';
import profile from '../../data/profile.json';
import workshops from '../../data/workshops.json';

function formatDate(dateStr: string) {
  const date = new Date(dateStr);
  return {
    day: date.getDate().toString().padStart(2, '0'),
    month: date.toLocaleDateString('en-US', { month: 'short' }).toUpperCase(),
    year: date.getFullYear().toString()
  };
}
---

<Layout title={`Upcoming Workshops | ${profile.name}`} description="View Kimberly's upcoming dance workshops">
  <main class="main">
    <div class="container">
      <header class="page-header">
        <h1 class="page-title">Upcoming <em>Workshops</em></h1>
        <p class="page-subtitle">
          Mark your calendars for future training sessions
        </p>
      </header>

      {workshops.upcoming.length > 0 ? (
        <div class="competitions-grid">
          {workshops.upcoming.map((workshop: any) => {
            const date = formatDate(workshop.date);
            return (
              <article class="competition-card animate-fade-in-up">
                <div class="competition-date">
                  <span class="day">{date.day}</span>
                  <span class="month">{date.month}</span>
                  <span class="year">{date.year}</span>
                </div>

                <div class="competition-info">
                  <h3>{workshop.name}</h3>
                  <p class="location">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                      <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    {workshop.location}
                  </p>
                </div>

                <div class="competition-result">
                  <span class="result-badge participation">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                  </span>
                </div>
              </article>
            );
          })}
        </div>
      ) : (
        <div class="empty-state">
          <p style="text-align: center; color: var(--black-soft); padding: var(--space-2xl) 0; font-style: italic;">
            No upcoming workshops scheduled yet. Check back soon!
          </p>
        </div>
      )}
    </div>
  </main>
</Layout>
