---
import Layout from '../../components/Layout.astro';
import profile from '../../data/profile.json';
import workshops from '../../data/workshops.json';

function formatDateRange(startDateStr: string, endDateStr: string) {
  const start = new Date(startDateStr);
  const end = new Date(endDateStr);
  return {
    days: `${start.getDate()}-${end.getDate()}`,
    month: start.toLocaleDateString('en-US', { month: 'short' }).toUpperCase(),
    year: start.getFullYear().toString()
  };
}
---

<Layout title={`Past Workshops | ${profile.name}`} description="View Kimberly's past dance workshops">
  <main class="main">
    <div class="container">
      <header class="page-header">
        <h1 class="page-title">Past <em>Workshops</em></h1>
        <p class="page-subtitle">
          A collection of training experiences and intensive sessions
        </p>
      </header>

      {workshops.past.length > 0 ? (
        <div class="competitions-grid">
          {workshops.past.map((workshop: any) => {
            const date = formatDateRange(workshop.startDate, workshop.endDate);
            return (
              <article class="competition-card animate-fade-in-up">
                <div class="competition-date">
                  <span class="day">{date.days}</span>
                  <span class="month">{date.month}</span>
                  <span class="year">{date.year}</span>
                </div>

                <div class="competition-info">
                  <h3>{workshop.name}</h3>
                  <p class="location">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                      <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    {workshop.location}
                  </p>
                </div>
              </article>
            );
          })}
        </div>
      ) : (
        <div class="empty-state">
          <p style="text-align: center; color: var(--black-soft); padding: var(--space-2xl) 0; font-style: italic;">
            Workshop history coming soon...
          </p>
        </div>
      )}
    </div>
  </main>
</Layout>
